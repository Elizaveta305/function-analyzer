<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π</title>
    
    <!-- –°—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="style.css">
    
    <!-- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ -->
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.10.1/mathjs.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <header>
            <div class="header-content">
                <h1>üßÆ –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π</h1>
            </div>
        </header>

        <!-- –û–±–ª–∞—Å—Ç—å –≤–≤–æ–¥–∞ -->
        <div class="input-section">
            <div class="input-card">
                <h3>üîç –í–≤–µ–¥–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é</h3>
                <div class="input-area">
                    <input type="text" id="functionInput" value="x^2">
                    <button id="calculateBtn" class="primary-btn">–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å</button>
                </div>
                <div class="hint-box">
                    <p><strong>üìù –ö–∞–∫ –≤–≤–æ–¥–∏—Ç—å:</strong> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ * –¥–ª—è —É–º–Ω–æ–∂–µ–Ω–∏—è, ^ –¥–ª—è —Å—Ç–µ–ø–µ–Ω–∏</p>
                    <p><strong>–ü—Ä–∏–º–µ—Ä—ã:</strong> 2*x + 3, x^2, sin(x), 1/x, exp(x)</p>
                </div>
                
                <div class="quick-examples">
                    <p><strong>‚ö° –ë—ã—Å—Ç—Ä—ã–µ –ø—Ä–∏–º–µ—Ä—ã:</strong></p>
                    <div class="example-buttons">
                        <button class="example-btn" data-func="x^2">x¬≤</button>
                        <button class="example-btn" data-func="2*x + 1">2x+1</button>
                        <button class="example-btn" data-func="x^2 - 4">x¬≤-4</button>
                        <button class="example-btn" data-func="sin(x)">sin(x)</button>
                        <button class="example-btn" data-func="1/x">1/x</button>
                        <button class="example-btn" data-func="x^3">x¬≥</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <div class="main-content">
            <!-- –°–≤–æ–π—Å—Ç–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–ª–µ–≤–∞ -->
            <div class="properties-card">
                <div class="card-header">
                    <h3>üìä –°–≤–æ–π—Å—Ç–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏</h3>
                    <div class="function-display" id="currentFunction">f(x) = x^2</div>
                </div>
                
                <div id="propertiesOutput">
                    <div class="empty-state">
                        <div class="empty-icon">üìà</div>
                        <p>–ù–∞–∂–º–∏—Ç–µ "–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å"</p>
                    </div>
                </div>
            </div>

            <!-- –ì—Ä–∞—Ñ–∏–∫ —Å–ø—Ä–∞–≤–∞ -->
            <div class="graph-card">
                <div class="card-header">
                    <h3>üìà –ì—Ä–∞—Ñ–∏–∫ —Ñ—É–Ω–∫—Ü–∏–∏</h3>
                    <div class="graph-stats">
                        <span id="graphStatus">–ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ</span>
                    </div>
                </div>
                
                <div id="plot" class="plot-container"></div>
                
                <div class="graph-controls">
                    <div class="control-group">
                        <label>–î–∏–∞–ø–∞–∑–æ–Ω:</label>
                        <input type="range" id="xRange" min="1" max="20" value="10">
                        <span>¬±<span id="rangeValue">10</span></span>
                    </div>
                    
                    <div class="control-buttons">
                        <button id="zoomInBtn">‚ûï</button>
                        <button id="zoomOutBtn">‚ûñ</button>
                        <button id="resetViewBtn">‚ü≤</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
        <div class="tech-section">
            <h3>‚öôÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
            <div class="tech-details">
                <div class="tech-item">
                    <strong>–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:</strong> HTML5, CSS3, JavaScript
                </div>
                <div class="tech-item">
                    <strong>–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏:</strong> Plotly.js (–≥—Ä–∞—Ñ–∏–∫–∏), Math.js (–≤—ã—á–∏—Å–ª–µ–Ω–∏—è)
                </div>
                <div class="tech-item">
                    <strong>–•–æ—Å—Ç–∏–Ω–≥:</strong> GitHub Pages
                </div>
                <div class="tech-item">
                    <strong>–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥:</strong> 
                    <a href="https://github.com/elizaveta305/function-analyzer" target="_blank">GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π</a>
                </div>
            </div>
        </div>

        <!-- –ü–æ–¥–≤–∞–ª -->
        <footer>
            <p>¬© 2026 –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π</p>
        </footer>
    </div>

    <!-- –ù–∞—à JavaScript -->
    <script>
        // ===== –ü–†–û–°–¢–û–ô –†–ê–ë–û–ß–ò–ô –ö–û–î =====
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≥—Ä—É–∑–∫—É –±–∏–±–ª–∏–æ—Ç–µ–∫
        function checkLibraries() {
            console.log('–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫...');
            console.log('Math.js loaded:', typeof math !== 'undefined');
            console.log('Plotly.js loaded:', typeof Plotly !== 'undefined');
            
            if (typeof math === 'undefined') {
                console.error('Math.js –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∞!');
                // –ü—Ä–æ–±—É–µ–º –∑–∞–≥—Ä—É–∑–∏—Ç—å –∑–∞–Ω–æ–≤–æ
                const script = document.createElement('script');
                script.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.10.1/mathjs.min.js';
                script.onload = initApp;
                document.head.appendChild(script);
            } else {
                initApp();
            }
        }
        
        function initApp() {
            console.log('üöÄ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ');
            
            // –≠–ª–µ–º–µ–Ω—Ç—ã
            const input = document.getElementById('functionInput');
            const btn = document.getElementById('calculateBtn');
            const plotDiv = document.getElementById('plot');
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∏–∫–∞
            Plotly.newPlot(plotDiv, [{
                x: [-5, -4, -3, -2, -1, 0, 1, 2, 3, 4, 5],
                y: [25, 16, 9, 4, 1, 0, 1, 4, 9, 16, 25],
                type: 'scatter',
                mode: 'lines',
                line: { color: '#3498db', width: 2 }
            }], {
                title: 'f(x) = x^2',
                xaxis: { title: 'x', gridcolor: '#f0f0f0' },
                yaxis: { title: 'f(x)', gridcolor: '#f0f0f0' },
                plot_bgcolor: '#fafafa'
            });
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–≤–æ–π—Å—Ç–≤–∞ –¥–ª—è x^2
            updatePropertiesForX2();
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
            btn.addEventListener('click', analyzeFunction);
            
            // –ü—Ä–∏–º–µ—Ä—ã
            document.querySelectorAll('.example-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    input.value = this.getAttribute('data-func');
                    analyzeFunction();
                });
            });
            
            // Enter –¥–ª—è –≤–≤–æ–¥–∞
            input.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') analyzeFunction();
            });
            
            // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–º
            document.getElementById('zoomInBtn').addEventListener('click', zoomIn);
            document.getElementById('zoomOutBtn').addEventListener('click', zoomOut);
            document.getElementById('resetViewBtn').addEventListener('click', resetView);
            
            // –î–∏–∞–ø–∞–∑–æ–Ω
            document.getElementById('xRange').addEventListener('input', function() {
                document.getElementById('rangeValue').textContent = this.value;
            });
            
            // –ê–≤—Ç–æ-–∞–Ω–∞–ª–∏–∑
            setTimeout(() => {
                analyzeFunction();
            }, 100);
        }
        
        function analyzeFunction() {
            const input = document.getElementById('functionInput');
            const expr = input.value.trim();
            
            if (!expr) {
                showError('–í–≤–µ–¥–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é');
                return;
            }
            
            document.getElementById('currentFunction').textContent = `f(x) = ${expr}`;
            document.getElementById('graphStatus').textContent = '–ê–Ω–∞–ª–∏–∑...';
            
            try {
                // –ö–æ–º–ø–∏–ª–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é
                const func = math.compile(expr);
                
                // –ü—Ä–æ—Å—Ç—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –¥–ª—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
                const props = [];
                
                if (expr === 'x^2') {
                    props.push({title: '–¢–∏–ø —Ñ—É–Ω–∫—Ü–∏–∏', value: '–ö–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–∞—è (–ø–∞—Ä–∞–±–æ–ª–∞)', icon: 'üìä'});
                    props.push({title: '–û–±–ª–∞—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è', value: '–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ —á–∏—Å–ª–∞', icon: 'üåê'});
                    props.push({title: '–ù—É–ª–∏ —Ñ—É–Ω–∫—Ü–∏–∏', value: 'x = 0', icon: '‚ö´'});
                    props.push({title: '–ü–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ —Å OY', value: '(0, 0)', icon: 'üîµ'});
                    props.push({title: '–ß—ë—Ç–Ω–æ—Å—Ç—å', value: '–ß—ë—Ç–Ω–∞—è', icon: 'üîÑ'});
                    props.push({title: '–í–µ—Ä—à–∏–Ω–∞', value: '(0, 0)', icon: 'üìç'});
                }
                else if (expr === '2*x + 1') {
                    props.push({title: '–¢–∏–ø —Ñ—É–Ω–∫—Ü–∏–∏', value: '–õ–∏–Ω–µ–π–Ω–∞—è', icon: 'üìä'});
                    props.push({title: '–û–±–ª–∞—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è', value: '–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ —á–∏—Å–ª–∞', icon: 'üåê'});
                    props.push({title: '–ù—É–ª–∏ —Ñ—É–Ω–∫—Ü–∏–∏', value: 'x = -0.5', icon: '‚ö´'});
                    props.push({title: '–ü–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ —Å OY', value: '(0, 1)', icon: 'üîµ'});
                    props.push({title: '–£–≥–ª–æ–≤–æ–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç', value: 'k = 2', icon: 'üìê'});
                }
                else if (expr === 'x^2 - 4') {
                    props.push({title: '–¢–∏–ø —Ñ—É–Ω–∫—Ü–∏–∏', value: '–ö–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–∞—è', icon: 'üìä'});
                    props.push({title: '–û–±–ª–∞—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è', value: '–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ —á–∏—Å–ª–∞', icon: 'üåê'});
                    props.push({title: '–ù—É–ª–∏ —Ñ—É–Ω–∫—Ü–∏–∏', value: 'x = -2, x = 2', icon: '‚ö´'});
                    props.push({title: '–ü–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ —Å OY', value: '(0, -4)', icon: 'üîµ'});
                    props.push({title: '–í–µ—Ä—à–∏–Ω–∞', value: '(0, -4)', icon: 'üìç'});
                }
                else if (expr === 'sin(x)') {
                    props.push({title: '–¢–∏–ø —Ñ—É–Ω–∫—Ü–∏–∏', value: '–¢—Ä–∏–≥–æ–Ω–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∞—è', icon: 'üìä'});
                    props.push({title: '–û–±–ª–∞—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è', value: '–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ —á–∏—Å–ª–∞', icon: 'üåê'});
                    props.push({title: '–ù—É–ª–∏ —Ñ—É–Ω–∫—Ü–∏–∏', value: 'x = œÄk, k‚àà‚Ñ§', icon: '‚ö´'});
                    props.push({title: '–ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å', value: 'T = 2œÄ', icon: '‚è±Ô∏è'});
                    props.push({title: '–ß—ë—Ç–Ω–æ—Å—Ç—å', value: '–ù–µ—á—ë—Ç–Ω–∞—è', icon: 'üîÑ'});
                }
                else if (expr === '1/x') {
                    props.push({title: '–¢–∏–ø —Ñ—É–Ω–∫—Ü–∏–∏', value: '–î—Ä–æ–±–Ω–æ-—Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è', icon: 'üìä'});
                    props.push({title: '–û–±–ª–∞—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è', value: 'x ‚â† 0', icon: 'üåê'});
                    props.push({title: '–ù—É–ª–∏ —Ñ—É–Ω–∫—Ü–∏–∏', value: '–ù–µ—Ç', icon: '‚ö´'});
                    props.push({title: '–ê—Å–∏–º–ø—Ç–æ—Ç—ã', value: 'x=0, y=0', icon: 'üìè'});
                    props.push({title: '–ß—ë—Ç–Ω–æ—Å—Ç—å', value: '–ù–µ—á—ë—Ç–Ω–∞—è', icon: 'üîÑ'});
                }
                else {
                    props.push({title: '–¢–∏–ø —Ñ—É–Ω–∫—Ü–∏–∏', value: '–ê–ª–≥–µ–±—Ä–∞–∏—á–µ—Å–∫–∞—è', icon: 'üìä'});
                    props.push({title: '–û–±–ª–∞—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è', value: '–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ —á–∏—Å–ª–∞', icon: 'üåê'});
                    props.push({title: '–°—Ç–∞—Ç—É—Å', value: '–§—É–Ω–∫—Ü–∏—è —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–∞', icon: '‚úÖ'});
                }
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–≤–æ–π—Å—Ç–≤–∞
                showProperties(props);
                
                // –°—Ç—Ä–æ–∏–º –≥—Ä–∞—Ñ–∏–∫
                plotFunction(expr, func);
                
                document.getElementById('graphStatus').textContent = '–ì–æ—Ç–æ–≤–æ';
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞:', error);
                showError(`–û—à–∏–±–∫–∞ –≤–≤–æ–¥–∞: ${error.message}`);
            }
        }
        
        function updatePropertiesForX2() {
            const props = [
                {title: '–¢–∏–ø —Ñ—É–Ω–∫—Ü–∏–∏', value: '–ö–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–∞—è (–ø–∞—Ä–∞–±–æ–ª–∞)', icon: 'üìä'},
                {title: '–û–±–ª–∞—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è', value: '–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ —á–∏—Å–ª–∞', icon: 'üåê'},
                {title: '–ù—É–ª–∏ —Ñ—É–Ω–∫—Ü–∏–∏', value: 'x = 0', icon: '‚ö´'},
                {title: '–ü–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ —Å OY', value: '(0, 0)', icon: 'üîµ'},
                {title: '–ß—ë—Ç–Ω–æ—Å—Ç—å', value: '–ß—ë—Ç–Ω–∞—è', icon: 'üîÑ'},
                {title: '–í–µ—Ä—à–∏–Ω–∞', value: '(0, 0)', icon: 'üìç'}
            ];
            showProperties(props);
        }
        
        function showProperties(props) {
            const container = document.getElementById('propertiesOutput');
            
            let html = '';
            props.forEach(p => {
                html += `
                    <div class="property-item">
                        <div class="property-icon">${p.icon}</div>
                        <div>
                            <div class="property-title">${p.title}</div>
                            <div class="property-value">${p.value}</div>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }
        
        function plotFunction(expr, func) {
            try {
                const range = parseInt(document.getElementById('xRange').value) || 10;
                const step = 0.1;
                
                const x = [];
                const y = [];
                
                // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ç–æ—á–∫–∏
                for (let i = -range; i <= range; i += step) {
                    try {
                        const val = func.evaluate({x: i});
                        if (isFinite(val)) {
                            x.push(i);
                            y.push(val);
                        }
                    } catch(e) {
                        // –†–∞–∑—Ä—ã–≤
                        x.push(i);
                        y.push(null);
                    }
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –≥—Ä–∞—Ñ–∏–∫
                Plotly.react('plot', [{
                    x: x,
                    y: y,
                    type: 'scatter',
                    mode: 'lines',
                    line: { color: '#3498db', width: 2 }
                }], {
                    title: `f(x) = ${expr}`,
                    xaxis: { 
                        title: 'x',
                        range: [-range, range]
                    },
                    yaxis: { title: 'f(x)' }
                });
                
            } catch(error) {
                console.error('–û—à–∏–±–∫–∞ –≥—Ä–∞—Ñ–∏–∫–∞:', error);
            }
        }
        
        function zoomIn() {
            Plotly.relayout('plot', {
                'xaxis.range[0]': '*0.8',
                'xaxis.range[1]': '*0.8',
                'yaxis.range[0]': '*0.8',
                'yaxis.range[1]': '*0.8'
            });
        }
        
        function zoomOut() {
            Plotly.relayout('plot', {
                'xaxis.range[0]': '*1.2',
                'xaxis.range[1]': '*1.2',
                'yaxis.range[0]': '*1.2',
                'yaxis.range[1]': '*1.2'
            });
        }
        
        function resetView() {
            const range = parseInt(document.getElementById('xRange').value) || 10;
            Plotly.relayout('plot', {
                'xaxis.range': [-range, range],
                'yaxis.range': [-range, range]
            });
        }
        
        function showError(msg) {
            const container = document.getElementById('propertiesOutput');
            container.innerHTML = `
                <div class="error-state">
                    <strong>–û—à–∏–±–∫–∞:</strong> ${msg}
                </div>
            `;
        }
        
        // –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É –±–∏–±–ª–∏–æ—Ç–µ–∫
        window.addEventListener('load', checkLibraries);
    </script>
</body>
</html>
